{"ast":null,"code":"function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useReducer } from 'react';\nimport Link from 'next/link';\nimport Head from 'next/head';\nimport { loadFirebase } from '../lib/db.js';\nexport default class employerList extends React.Component {\n  componentDidMount() {\n    const script = document.createElement(\"script\");\n    script.src = \"/js/scripts.js\";\n    script.async = true;\n    document.body.appendChild(script);\n    const script1 = document.createElement(\"script\");\n    script1.src = \"/assets/demo/datatables-demo.js\";\n    script1.async = true;\n    document.body.appendChild(script1);\n  }\n\n  constructor(props) {\n    super(props);\n\n    _defineProperty(this, \"deletePassId\", id => {\n      $(\"#deleteConfirmModal\").modal('show');\n      this.setState({\n        delete_id: id\n      });\n      console.log(this.state.delete_id);\n    });\n\n    _defineProperty(this, \"addPassId\", id => {\n      this.setState({\n        edit_id: id\n      });\n      let firebase = loadFirebase();\n      let data = {};\n\n      try {\n        firebase.firestore().collection('employer').doc(id).get().then(snapshot => {\n          data = snapshot.data();\n          console.log(data);\n          this.setState({\n            EMPLOYERID: data.edit_id,\n            C_Name: data.C_Name,\n            C_noEmp: data.C_noEmp,\n            C_published_date: data.C_published_date,\n            C_tel: data.C_tel,\n            C_emailaddr: data.C_emailaddr,\n            C_city: data.C_city,\n            C_area: data.C_area,\n            C_Address: data.C_Address,\n            C_Description: data.C_Description\n          });\n        });\n        console.log(\"getting data\");\n        console.log(this.state.employerName);\n      } catch (error) {\n        console.log(error);\n      }\n\n      console.log(this.state.employerName);\n      $(\"#addJobModal\").modal('show');\n    });\n\n    _defineProperty(this, \"editPassId\", id => {\n      this.setState({\n        edit_id: id\n      });\n      let firebase = loadFirebase();\n      let data = {};\n\n      try {\n        firebase.firestore().collection('employer').doc(id).get().then(snapshot => {\n          data = snapshot.data();\n          console.log(data);\n          this.setState({\n            C_Name: data.C_Name,\n            C_noEmp: data.C_noEmp,\n            C_published_date: data.C_published_date,\n            C_tel: data.C_tel,\n            C_emailaddr: data.C_emailaddr,\n            C_Address: data.C_Address,\n            C_Description: data.C_Description\n          });\n        });\n        console.log(\"getting data\");\n        console.log(this.state.employerName);\n      } catch (error) {\n        console.log(error);\n      }\n\n      console.log(this.state.employerName);\n      $(\"#editEmployerModal\").modal('show');\n    });\n\n    _defineProperty(this, \"updateEmployer\", () => {\n      let firebase = loadFirebase();\n\n      try {\n        firebase.firestore().collection('employer').doc(this.state.edit_id).update({\n          C_Name: this.state.C_Name,\n          C_noEmp: this.state.C_noEmp,\n          C_published_date: this.state.C_published_date,\n          C_tel: this.state.C_tel,\n          C_emailaddr: this.state.C_emailaddr,\n          C_Address: this.state.C_Address,\n          C_Description: this.state.C_Description\n        });\n        this.refreshTable();\n      } catch (error) {\n        console.log(error);\n      }\n\n      $(\"#editEmployerModal\").modal('hide');\n    });\n\n    _defineProperty(this, \"getJobCount\", id => {\n      let jobs = this.props.jobs;\n      let count = 0;\n      jobs.map(job => {\n        if (job.data.EMPLOYERID == id) {\n          console.log(\"same value found\");\n          count++;\n        }\n      });\n      return count;\n    });\n\n    _defineProperty(this, \"handleChange\", event => {\n      this.setState({\n        [event.target.name]: event.target.value\n      });\n\n      if (event.target.name == \"AREAID\") {\n        this.getCities(event.target.value);\n      }\n\n      this.setState({\n        showCities: true\n      });\n    });\n\n    _defineProperty(this, \"addJob\", event => {\n      event.preventDefault();\n      let firebase = loadFirebase();\n      const userRef = firebase.firestore().collection('job').add({\n        EMPLOYERID: this.state.edit_id,\n        Jname: this.state.Jname,\n        J_Contract: this.state.J_Contract,\n        J_min_salary: this.state.J_min_salary,\n        J_max_salary: this.state.J_max_salary,\n        J_hours: this.state.J_hours,\n        J_Working_Day: this.state.J_Working_Day,\n        J_JpLevel: this.state.J_JpLevel,\n        J_tel: this.state.J_tel,\n        PostedDate: this.state.PostedDate,\n        J_email: this.state.J_email,\n        J_area: this.state.J_area,\n        J_city: this.state.J_city,\n        J_Address: this.state.J_Address,\n        J_Description: this.state.J_Description,\n        J_Qualification: this.state.J_Qualification\n      });\n      this.setState({\n        EMPLOYERID: '',\n        Jname: '',\n        J_tel: '',\n        J_min_salary: '',\n        J_max_salary: '',\n        PostedDate: '',\n        J_hours: '',\n        J_email: '',\n        J_city: '',\n        J_area: '',\n        J_Working_Day: '',\n        J_Qualification: '',\n        J_JpLevel: '',\n        J_Description: '',\n        J_Contract: '',\n        J_Address: ''\n      });\n      this.addJobCount(this.state.edit_id);\n      console.log(userRef);\n    });\n\n    _defineProperty(this, \"addJobCount\", id => {\n      console.log(\"Job count adding\");\n      let data = {};\n\n      try {\n        let firebase = loadFirebase();\n        firebase.firestore().collection('employer').doc(id).get().then(snapshot => {\n          data = snapshot.data();\n          firebase.firestore().collection('employer').doc(id).update({\n            jobCount: data.jobCount + 1\n          });\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    _defineProperty(this, \"getCities\", id => {\n      let cities = [];\n\n      try {\n        let firebase = loadFirebase();\n        firebase.firestore().collection('city').where('AREAID', \"==\", id).get().then(snapshot => {\n          snapshot.forEach(doc => {\n            cities.push(Object.assign({\n              id: doc.id\n            }, doc.data()));\n          });\n          console.log({\n            cities\n          });\n          this.setState({\n            cities\n          });\n        });\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    _defineProperty(this, \"selectDisable\", event => {\n      $(\"#city option:first\").attr(\"disabled\", \"disabled\");\n      $(\"#area option:first\").attr(\"disabled\", \"disabled\");\n    });\n\n    _defineProperty(this, \"addEmployer\", event => {\n      event.preventDefault();\n      let firebase = loadFirebase();\n      const userRef = firebase.firestore().collection('employer').add({\n        C_Name: this.state.C_Name,\n        C_noEmp: this.state.C_noEmp,\n        C_published_date: this.state.C_published_date,\n        C_tel: this.state.C_tel,\n        C_emailaddr: this.state.C_emailaddr,\n        C_Address: this.state.C_Address,\n        C_Description: this.state.C_Description\n      });\n      this.setState({\n        C_Name: this.state.C_Name,\n        C_noEmp: this.state.C_noEmp,\n        C_published_date: this.state.C_published_date,\n        C_tel: this.state.C_tel,\n        C_emailaddr: this.state.C_emailaddr,\n        C_Address: this.state.C_Address,\n        C_Description: this.state.C_Description\n      });\n      $(\"#addEmployerModal\").modal('hide');\n    });\n\n    _defineProperty(this, \"deleteEmployer\", () => {\n      let firebase = loadFirebase();\n\n      try {\n        firebase.firestore().collection('employer').doc(this.state.delete_id).delete();\n        console.log(\"Delete successful\");\n        this.refreshTable();\n      } catch (error) {\n        console.log(error);\n      }\n    });\n\n    _defineProperty(this, \"clearInput\", event => {\n      this.setState(this.initial_state);\n      let inputs, index;\n      inputs = document.getElementsByTagName('input');\n\n      for (index = 0; index < inputs.length; ++index) {\n        inputs[index].value = '';\n      }\n\n      document.getElementById('Jname').value = '';\n      document.getElementById('J_min_salar').value = '';\n      document.getElementById('J_max_salary').value = '';\n      document.getElementById('J_hours').value = '';\n      document.getElementById('J_Working_Dar').value = '';\n      document.getElementById('J_tel').value = '';\n      document.getElementById('datte').value = '';\n      document.getElementById('J_email').value = '';\n      $(\"#J_Contract option[selected]\").removeAttr(\"selected\");\n      $(\"#J_Contract option:first\").attr(\"selected\", \"selected\");\n      $(\"#J_JpLevel option[selected]\").removeAttr(\"selected\");\n      $(\"#J_JpLevel option:first\").attr(\"selected\", \"selected\");\n      $(\"#min_exp_year option[selected]\").removeAttr(\"selected\");\n      $(\"#min_exp_year option:first\").attr(\"selected\", \"selected\");\n      $(\"#J_city option[selected]\").removeAttr(\"selected\");\n      $(\"#J_city option:first\").attr(\"selected\", \"selected\");\n      $(\"#J_area option[selected]\").removeAttr(\"selected\");\n      $(\"#J_area option:first\").attr(\"selected\", \"selected\");\n    });\n\n    this.handleChange = this.handleChange.bind(this);\n    this.datatableRef = React.createRef(); // this.employers = props.employer || []\n\n    this.$datatable = null;\n    this.initial_state = {\n      EMPLOYERID: '',\n      C_Name: '',\n      C_noEmp: '',\n      C_published_date: '',\n      C_tel: '',\n      C_emailaddr: '',\n      C_city: '',\n      C_area: '',\n      C_Address: '',\n      C_Description: '',\n      employers: props.employer || [],\n      areas: props.area || []\n    };\n    this.state = this.initial_state;\n  }\n\n  componentDidMount() {\n    this.initializeDatatable();\n  }\n\n  initializeDatatable() {\n    this.$datatable = $(this.datatableRef.current).DataTable({\n      order: [[3, \"desc\"]]\n    });\n  }\n\n  refreshTable() {\n    this.$datatable.clear();\n    const self = this;\n    employerList.getInitialProps().then(response => {\n      self.setState({\n        employers: response.employer\n      }); // self.initializeDatatable()\n    }).bind(this);\n  }\n\n  static async getInitialProps() {\n    const firebase = await loadFirebase();\n    const employerQuerySnapshot = await firebase.firestore().collection(\"employer\").limit(10).get();\n    const employers = employerQuerySnapshot.docs.map(doc => _objectSpread(_objectSpread({}, doc.data()), {}, {\n      id: doc.id\n    }));\n    const areaQuerySnapshot = await firebase.firestore().collection(\"area\").limit(10).get();\n    const areas = areaQuerySnapshot.docs.map(doc => _objectSpread(_objectSpread({}, doc.data()), {}, {\n      id: doc.id\n    }));\n    const cityQuerySnapshot = await firebase.firestore().collection(\"city\").get();\n    const cities = cityQuerySnapshot.docs.map(doc => _objectSpread(_objectSpread({}, doc.data()), {}, {\n      id: doc.id\n    }));\n    const jobQuerySnapshot = await firebase.firestore().collection(\"job\").get();\n    const jobs = jobQuerySnapshot.docs.map(doc => ({\n      data: doc.data(),\n      id: doc.id\n    }));\n    return {\n      employer: employers,\n      area: areas,\n      city: cities,\n      jobs: jobs\n    };\n  }\n\n  render() {}\n\n}","map":{"version":3,"sources":["C:/Users/lenovo/Desktop/admin_pages/pages/eg1.js"],"names":["React","useReducer","Link","Head","loadFirebase","employerList","Component","componentDidMount","script","document","createElement","src","async","body","appendChild","script1","constructor","props","id","$","modal","setState","delete_id","console","log","state","edit_id","firebase","data","firestore","collection","doc","get","then","snapshot","EMPLOYERID","C_Name","C_noEmp","C_published_date","C_tel","C_emailaddr","C_city","C_area","C_Address","C_Description","employerName","error","update","refreshTable","jobs","count","map","job","event","target","name","value","getCities","showCities","preventDefault","userRef","add","Jname","J_Contract","J_min_salary","J_max_salary","J_hours","J_Working_Day","J_JpLevel","J_tel","PostedDate","J_email","J_area","J_city","J_Address","J_Description","J_Qualification","addJobCount","jobCount","cities","where","forEach","push","Object","assign","attr","delete","initial_state","inputs","index","getElementsByTagName","length","getElementById","removeAttr","handleChange","bind","datatableRef","createRef","$datatable","employers","employer","areas","area","initializeDatatable","current","DataTable","order","clear","self","getInitialProps","response","employerQuerySnapshot","limit","docs","areaQuerySnapshot","cityQuerySnapshot","jobQuerySnapshot","city","render"],"mappings":";;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAAQC,YAAR,QAA2B,cAA3B;AAEA,eAAe,MAAMC,YAAN,SAA2BL,KAAK,CAACM,SAAjC,CAA2C;AACtDC,EAAAA,iBAAiB,GAAE;AACf,UAAMC,MAAM,GAAGC,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAf;AACAF,IAAAA,MAAM,CAACG,GAAP,GAAa,gBAAb;AACAH,IAAAA,MAAM,CAACI,KAAP,GAAe,IAAf;AAEAH,IAAAA,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BN,MAA1B;AAEA,UAAMO,OAAO,GAAGN,QAAQ,CAACC,aAAT,CAAuB,QAAvB,CAAhB;AACAK,IAAAA,OAAO,CAACJ,GAAR,GAAc,iCAAd;AACAI,IAAAA,OAAO,CAACH,KAAR,GAAgB,IAAhB;AAEAH,IAAAA,QAAQ,CAACI,IAAT,CAAcC,WAAd,CAA0BC,OAA1B;AAEH;;AACDC,EAAAA,WAAW,CAAEC,KAAF,EAAQ;AACf,UAAMA,KAAN;;AADe,0CAsFHC,EAAD,IAAM;AACjBC,MAAAA,CAAC,CAAC,qBAAD,CAAD,CAAyBC,KAAzB,CAA+B,MAA/B;AACA,WAAKC,QAAL,CAAc;AAACC,QAAAA,SAAS,EAAGJ;AAAb,OAAd;AACAK,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWH,SAAvB;AACH,KA1FkB;;AAAA,uCA4FNJ,EAAD,IAAQ;AAChB,WAAKG,QAAL,CAAc;AAACK,QAAAA,OAAO,EAAGR;AAAX,OAAd;AACA,UAAIS,QAAQ,GAAGvB,YAAY,EAA3B;AACA,UAAIwB,IAAI,GAAG,EAAX;;AACA,UAAG;AACCD,QAAAA,QAAQ,CAACE,SAAT,GAAqBC,UAArB,CAAgC,UAAhC,EAA4CC,GAA5C,CAAgDb,EAAhD,EAAoDc,GAApD,GACAC,IADA,CACMC,QAAD,IAAY;AACbN,UAAAA,IAAI,GAAGM,QAAQ,CAACN,IAAT,EAAP;AACAL,UAAAA,OAAO,CAACC,GAAR,CAAYI,IAAZ;AACA,eAAKP,QAAL,CAAe;AACXc,YAAAA,UAAU,EAAEP,IAAI,CAACF,OADN;AAEXU,YAAAA,MAAM,EAAER,IAAI,CAACQ,MAFF;AAGXC,YAAAA,OAAO,EAACT,IAAI,CAACS,OAHF;AAIXC,YAAAA,gBAAgB,EAACV,IAAI,CAACU,gBAJX;AAKXC,YAAAA,KAAK,EAACX,IAAI,CAACW,KALA;AAMXC,YAAAA,WAAW,EAACZ,IAAI,CAACY,WANN;AAOXC,YAAAA,MAAM,EAACb,IAAI,CAACa,MAPD;AAQXC,YAAAA,MAAM,EAACd,IAAI,CAACc,MARD;AASXC,YAAAA,SAAS,EAACf,IAAI,CAACe,SATJ;AAUXC,YAAAA,aAAa,EAAChB,IAAI,CAACgB;AAVR,WAAf;AAYH,SAhBD;AAiBArB,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWoB,YAAvB;AACH,OApBD,CAoBC,OAAMC,KAAN,EAAY;AACTvB,QAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAZ;AACH;;AACDvB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWoB,YAAvB;AACA1B,MAAAA,CAAC,CAAC,cAAD,CAAD,CAAkBC,KAAlB,CAAwB,MAAxB;AACH,KAzHkB;;AAAA,wCA2HLF,EAAD,IAAQ;AACjB,WAAKG,QAAL,CAAc;AAACK,QAAAA,OAAO,EAAGR;AAAX,OAAd;AACA,UAAIS,QAAQ,GAAGvB,YAAY,EAA3B;AACA,UAAIwB,IAAI,GAAG,EAAX;;AACA,UAAG;AACCD,QAAAA,QAAQ,CAACE,SAAT,GAAqBC,UAArB,CAAgC,UAAhC,EAA4CC,GAA5C,CAAgDb,EAAhD,EAAoDc,GAApD,GACCC,IADD,CACOC,QAAD,IAAY;AACdN,UAAAA,IAAI,GAAGM,QAAQ,CAACN,IAAT,EAAP;AACAL,UAAAA,OAAO,CAACC,GAAR,CAAYI,IAAZ;AACA,eAAKP,QAAL,CAAe;AACXe,YAAAA,MAAM,EAAER,IAAI,CAACQ,MADF;AAEXC,YAAAA,OAAO,EAACT,IAAI,CAACS,OAFF;AAGXC,YAAAA,gBAAgB,EAACV,IAAI,CAACU,gBAHX;AAIXC,YAAAA,KAAK,EAACX,IAAI,CAACW,KAJA;AAKXC,YAAAA,WAAW,EAACZ,IAAI,CAACY,WALN;AAMXG,YAAAA,SAAS,EAACf,IAAI,CAACe,SANJ;AAOXC,YAAAA,aAAa,EAAChB,IAAI,CAACgB;AAPR,WAAf;AASH,SAbD;AAcArB,QAAAA,OAAO,CAACC,GAAR,CAAY,cAAZ;AACAD,QAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWoB,YAAvB;AAEH,OAlBD,CAkBC,OAAMC,KAAN,EAAY;AACTvB,QAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAZ;AACH;;AACDvB,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWoB,YAAvB;AACA1B,MAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBC,KAAxB,CAA8B,MAA9B;AACH,KAtJkB;;AAAA,4CAwJF,MAAK;AAClB,UAAIO,QAAQ,GAAGvB,YAAY,EAA3B;;AACA,UAAG;AACCuB,QAAAA,QAAQ,CAACE,SAAT,GAAqBC,UAArB,CAAgC,UAAhC,EAA4CC,GAA5C,CAAgD,KAAKN,KAAL,CAAWC,OAA3D,EAAoEqB,MAApE,CAA2E;AACvEX,UAAAA,MAAM,EAAC,KAAKX,KAAL,CAAWW,MADqD;AAEvEC,UAAAA,OAAO,EAAC,KAAKZ,KAAL,CAAWY,OAFoD;AAGvEC,UAAAA,gBAAgB,EAAC,KAAKb,KAAL,CAAWa,gBAH2C;AAIvEC,UAAAA,KAAK,EAAC,KAAKd,KAAL,CAAWc,KAJsD;AAKvEC,UAAAA,WAAW,EAAC,KAAKf,KAAL,CAAWe,WALgD;AAMxEG,UAAAA,SAAS,EAAC,KAAKlB,KAAL,CAAWkB,SANmD;AAOvEC,UAAAA,aAAa,EAAC,KAAKnB,KAAL,CAAWmB;AAP8C,SAA3E;AASA,aAAKI,YAAL;AACH,OAXD,CAWC,OAAMF,KAAN,EAAY;AACTvB,QAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAZ;AACH;;AACD3B,MAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBC,KAAxB,CAA8B,MAA9B;AACH,KAzKkB;;AAAA,yCA2KJF,EAAD,IAAQ;AAClB,UAAI+B,IAAI,GAAG,KAAKhC,KAAL,CAAWgC,IAAtB;AACA,UAAIC,KAAK,GAAG,CAAZ;AAEKD,MAAAA,IAAI,CAACE,GAAL,CAASC,GAAG,IAAI;AACZ,YAAGA,GAAG,CAACxB,IAAJ,CAASO,UAAT,IAAuBjB,EAA1B,EAA6B;AACzBK,UAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA0B,UAAAA,KAAK;AACR;AAEJ,OAND;AAOA,aAAOA,KAAP;AACR,KAvLkB;;AAAA,0CAyLHG,KAAD,IAAW;AACtB,WAAKhC,QAAL,CAAc;AAAC,SAACgC,KAAK,CAACC,MAAN,CAAaC,IAAd,GAAsBF,KAAK,CAACC,MAAN,CAAaE;AAApC,OAAd;;AACA,UAAGH,KAAK,CAACC,MAAN,CAAaC,IAAb,IAAqB,QAAxB,EAAiC;AAC7B,aAAKE,SAAL,CAAeJ,KAAK,CAACC,MAAN,CAAaE,KAA5B;AACH;;AACD,WAAKnC,QAAL,CAAc;AAACqC,QAAAA,UAAU,EAAG;AAAd,OAAd;AACH,KA/LkB;;AAAA,oCAiMVL,KAAK,IAAI;AACdA,MAAAA,KAAK,CAACM,cAAN;AACA,UAAIhC,QAAQ,GAAGvB,YAAY,EAA3B;AACA,YAAMwD,OAAO,GAAGjC,QAAQ,CAACE,SAAT,GAAqBC,UAArB,CAAgC,KAAhC,EACP+B,GADO,CACH;AACG1B,QAAAA,UAAU,EAAG,KAAKV,KAAL,CAAWC,OAD3B;AAGGoC,QAAAA,KAAK,EAAC,KAAKrC,KAAL,CAAWqC,KAHpB;AAIGC,QAAAA,UAAU,EAAC,KAAKtC,KAAL,CAAWsC,UAJzB;AAKGC,QAAAA,YAAY,EAAC,KAAKvC,KAAL,CAAWuC,YAL3B;AAMGC,QAAAA,YAAY,EAAC,KAAKxC,KAAL,CAAWwC,YAN3B;AAOGC,QAAAA,OAAO,EAAC,KAAKzC,KAAL,CAAWyC,OAPtB;AAQGC,QAAAA,aAAa,EAAC,KAAK1C,KAAL,CAAW0C,aAR5B;AASGC,QAAAA,SAAS,EAAC,KAAK3C,KAAL,CAAW2C,SATxB;AAUGC,QAAAA,KAAK,EAAC,KAAK5C,KAAL,CAAW4C,KAVpB;AAWGC,QAAAA,UAAU,EAAC,KAAK7C,KAAL,CAAW6C,UAXzB;AAYGC,QAAAA,OAAO,EAAC,KAAK9C,KAAL,CAAW8C,OAZtB;AAaGC,QAAAA,MAAM,EAAC,KAAK/C,KAAL,CAAW+C,MAbrB;AAcGC,QAAAA,MAAM,EAAC,KAAKhD,KAAL,CAAWgD,MAdrB;AAeGC,QAAAA,SAAS,EAAC,KAAKjD,KAAL,CAAWiD,SAfxB;AAgBGC,QAAAA,aAAa,EAAC,KAAKlD,KAAL,CAAWkD,aAhB5B;AAiBGC,QAAAA,eAAe,EAAC,KAAKnD,KAAL,CAAWmD;AAjB9B,OADG,CAAhB;AAmBQ,WAAKvD,QAAL,CAAc;AACVc,QAAAA,UAAU,EAAG,EADH;AAEV2B,QAAAA,KAAK,EAAC,EAFI;AAGVO,QAAAA,KAAK,EAAC,EAHI;AAIVL,QAAAA,YAAY,EAAC,EAJH;AAKVC,QAAAA,YAAY,EAAC,EALH;AAMVK,QAAAA,UAAU,EAAC,EAND;AAOVJ,QAAAA,OAAO,EAAC,EAPE;AAQVK,QAAAA,OAAO,EAAC,EARE;AASVE,QAAAA,MAAM,EAAC,EATG;AAUVD,QAAAA,MAAM,EAAC,EAVG;AAWVL,QAAAA,aAAa,EAAC,EAXJ;AAYVS,QAAAA,eAAe,EAAC,EAZN;AAaVR,QAAAA,SAAS,EAAC,EAbA;AAcVO,QAAAA,aAAa,EAAC,EAdJ;AAeVZ,QAAAA,UAAU,EAAC,EAfD;AAgBVW,QAAAA,SAAS,EAAC;AAhBA,OAAd;AAiBA,WAAKG,WAAL,CAAiB,KAAKpD,KAAL,CAAWC,OAA5B;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAYoC,OAAZ;AACX,KA1OkB;;AAAA,yCA4OJ1C,EAAD,IAAQ;AAClBK,MAAAA,OAAO,CAACC,GAAR,CAAY,kBAAZ;AACA,UAAII,IAAI,GAAG,EAAX;;AACA,UAAG;AACC,YAAID,QAAQ,GAAGvB,YAAY,EAA3B;AACAuB,QAAAA,QAAQ,CAACE,SAAT,GAAqBC,UAArB,CAAgC,UAAhC,EAA4CC,GAA5C,CAAgDb,EAAhD,EAAoDc,GAApD,GACGC,IADH,CACSC,QAAD,IAAY;AACdN,UAAAA,IAAI,GAAGM,QAAQ,CAACN,IAAT,EAAP;AACAD,UAAAA,QAAQ,CAACE,SAAT,GAAqBC,UAArB,CAAgC,UAAhC,EAA4CC,GAA5C,CAAgDb,EAAhD,EAAoD6B,MAApD,CAA2D;AAAC+B,YAAAA,QAAQ,EAAGlD,IAAI,CAACkD,QAAL,GAAc;AAA1B,WAA3D;AACH,SAJH;AAKH,OAPD,CAOC,OAAMhC,KAAN,EAAY;AACTvB,QAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAZ;AACH;AACF,KAzPgB;;AAAA,uCA2PN5B,EAAD,IAAQ;AAChB,UAAI6D,MAAM,GAAG,EAAb;;AACA,UAAG;AACC,YAAIpD,QAAQ,GAAGvB,YAAY,EAA3B;AACAuB,QAAAA,QAAQ,CAACE,SAAT,GAAqBC,UAArB,CAAgC,MAAhC,EAAwCkD,KAAxC,CAA8C,QAA9C,EAAuD,IAAvD,EAA4D9D,EAA5D,EACCc,GADD,GAECC,IAFD,CAEOC,QAAD,IAAa;AACfA,UAAAA,QAAQ,CAAC+C,OAAT,CAAiBlD,GAAG,IAAI;AACpBgD,YAAAA,MAAM,CAACG,IAAP,CAAYC,MAAM,CAACC,MAAP,CACR;AAAClE,cAAAA,EAAE,EAAGa,GAAG,CAACb;AAAV,aADQ,EAERa,GAAG,CAACH,IAAJ,EAFQ,CAAZ;AAIH,WALD;AAMAL,UAAAA,OAAO,CAACC,GAAR,CAAY;AAACuD,YAAAA;AAAD,WAAZ;AACA,eAAK1D,QAAL,CAAc;AAAC0D,YAAAA;AAAD,WAAd;AACH,SAXD;AAYH,OAdD,CAcC,OAAMjC,KAAN,EAAY;AACTvB,QAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAZ;AACH;AACJ,KA9QkB;;AAAA,2CAgRFO,KAAD,IAAW;AACvBlC,MAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBkE,IAAxB,CAA6B,UAA7B,EAAwC,UAAxC;AAEAlE,MAAAA,CAAC,CAAC,oBAAD,CAAD,CAAwBkE,IAAxB,CAA6B,UAA7B,EAAwC,UAAxC;AACH,KApRkB;;AAAA,yCAsRLhC,KAAK,IAAI;AACnBA,MAAAA,KAAK,CAACM,cAAN;AACA,UAAIhC,QAAQ,GAAGvB,YAAY,EAA3B;AACA,YAAMwD,OAAO,GAAGjC,QAAQ,CAACE,SAAT,GAAqBC,UAArB,CAAgC,UAAhC,EACP+B,GADO,CACH;AACDzB,QAAAA,MAAM,EAAC,KAAKX,KAAL,CAAWW,MADjB;AAEDC,QAAAA,OAAO,EAAC,KAAKZ,KAAL,CAAWY,OAFlB;AAGDC,QAAAA,gBAAgB,EAAC,KAAKb,KAAL,CAAWa,gBAH3B;AAIDC,QAAAA,KAAK,EAAC,KAAKd,KAAL,CAAWc,KAJhB;AAKDC,QAAAA,WAAW,EAAC,KAAKf,KAAL,CAAWe,WALtB;AAMDG,QAAAA,SAAS,EAAC,KAAKlB,KAAL,CAAWkB,SANpB;AAODC,QAAAA,aAAa,EAAC,KAAKnB,KAAL,CAAWmB;AAPxB,OADG,CAAhB;AAUQ,WAAKvB,QAAL,CAAc;AACVe,QAAAA,MAAM,EAAC,KAAKX,KAAL,CAAWW,MADR;AAEVC,QAAAA,OAAO,EAAC,KAAKZ,KAAL,CAAWY,OAFT;AAGVC,QAAAA,gBAAgB,EAAC,KAAKb,KAAL,CAAWa,gBAHlB;AAIVC,QAAAA,KAAK,EAAC,KAAKd,KAAL,CAAWc,KAJP;AAKVC,QAAAA,WAAW,EAAC,KAAKf,KAAL,CAAWe,WALb;AAMVG,QAAAA,SAAS,EAAC,KAAKlB,KAAL,CAAWkB,SANX;AAOVC,QAAAA,aAAa,EAAC,KAAKnB,KAAL,CAAWmB;AAPf,OAAd;AASRzB,MAAAA,CAAC,CAAC,mBAAD,CAAD,CAAuBC,KAAvB,CAA6B,MAA7B;AACH,KA7SkB;;AAAA,4CA+SF,MAAM;AACnB,UAAIO,QAAQ,GAAGvB,YAAY,EAA3B;;AACA,UAAG;AACCuB,QAAAA,QAAQ,CAACE,SAAT,GAAqBC,UAArB,CAAgC,UAAhC,EACCC,GADD,CACK,KAAKN,KAAL,CAAWH,SADhB,EAECgE,MAFD;AAGA/D,QAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ;AACA,aAAKwB,YAAL;AACH,OAND,CAMC,OAAMF,KAAN,EAAY;AACTvB,QAAAA,OAAO,CAACC,GAAR,CAAYsB,KAAZ;AACH;AACJ,KA1TkB;;AAAA,wCA4TLO,KAAD,IAAW;AACpB,WAAKhC,QAAL,CAAc,KAAKkE,aAAnB;AACA,UAAIC,MAAJ,EAAYC,KAAZ;AAEAD,MAAAA,MAAM,GAAG/E,QAAQ,CAACiF,oBAAT,CAA8B,OAA9B,CAAT;;AACA,WAAKD,KAAK,GAAG,CAAb,EAAgBA,KAAK,GAAGD,MAAM,CAACG,MAA/B,EAAuC,EAAEF,KAAzC,EAAgD;AAC5CD,QAAAA,MAAM,CAACC,KAAD,CAAN,CAAcjC,KAAd,GAAsB,EAAtB;AACH;;AACD/C,MAAAA,QAAQ,CAACmF,cAAT,CAAwB,OAAxB,EAAiCpC,KAAjC,GAAyC,EAAzC;AACA/C,MAAAA,QAAQ,CAACmF,cAAT,CAAwB,aAAxB,EAAuCpC,KAAvC,GAA+C,EAA/C;AACA/C,MAAAA,QAAQ,CAACmF,cAAT,CAAwB,cAAxB,EAAwCpC,KAAxC,GAAgD,EAAhD;AACA/C,MAAAA,QAAQ,CAACmF,cAAT,CAAwB,SAAxB,EAAmCpC,KAAnC,GAA2C,EAA3C;AACA/C,MAAAA,QAAQ,CAACmF,cAAT,CAAwB,eAAxB,EAAyCpC,KAAzC,GAAiD,EAAjD;AACA/C,MAAAA,QAAQ,CAACmF,cAAT,CAAwB,OAAxB,EAAiCpC,KAAjC,GAAyC,EAAzC;AACA/C,MAAAA,QAAQ,CAACmF,cAAT,CAAwB,OAAxB,EAAiCpC,KAAjC,GAAyC,EAAzC;AACA/C,MAAAA,QAAQ,CAACmF,cAAT,CAAwB,SAAxB,EAAmCpC,KAAnC,GAA2C,EAA3C;AAEArC,MAAAA,CAAC,CAAC,8BAAD,CAAD,CAAkC0E,UAAlC,CAA6C,UAA7C;AACA1E,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8BkE,IAA9B,CAAmC,UAAnC,EAA8C,UAA9C;AAEAlE,MAAAA,CAAC,CAAC,6BAAD,CAAD,CAAiC0E,UAAjC,CAA4C,UAA5C;AACA1E,MAAAA,CAAC,CAAC,yBAAD,CAAD,CAA6BkE,IAA7B,CAAkC,UAAlC,EAA6C,UAA7C;AAEAlE,MAAAA,CAAC,CAAC,gCAAD,CAAD,CAAoC0E,UAApC,CAA+C,UAA/C;AACA1E,MAAAA,CAAC,CAAC,4BAAD,CAAD,CAAgCkE,IAAhC,CAAqC,UAArC,EAAgD,UAAhD;AAEAlE,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8B0E,UAA9B,CAAyC,UAAzC;AACA1E,MAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BkE,IAA1B,CAA+B,UAA/B,EAA0C,UAA1C;AAEAlE,MAAAA,CAAC,CAAC,0BAAD,CAAD,CAA8B0E,UAA9B,CAAyC,UAAzC;AACA1E,MAAAA,CAAC,CAAC,sBAAD,CAAD,CAA0BkE,IAA1B,CAA+B,UAA/B,EAA0C,UAA1C;AACH,KA3VkB;;AAEf,SAAKS,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,YAAL,GAAoBhG,KAAK,CAACiG,SAAN,EAApB,CAHe,CAIf;;AACA,SAAKC,UAAL,GAAkB,IAAlB;AACA,SAAKX,aAAL,GAAqB;AACjBpD,MAAAA,UAAU,EAAG,EADI;AAEjBC,MAAAA,MAAM,EAAG,EAFQ;AAGjBC,MAAAA,OAAO,EAAE,EAHQ;AAIjBC,MAAAA,gBAAgB,EAAC,EAJA;AAKjBC,MAAAA,KAAK,EAAC,EALW;AAMjBC,MAAAA,WAAW,EAAC,EANK;AAOjBC,MAAAA,MAAM,EAAC,EAPU;AAQjBC,MAAAA,MAAM,EAAC,EARU;AASjBC,MAAAA,SAAS,EAAC,EATO;AAUjBC,MAAAA,aAAa,EAAC,EAVG;AAWjBuD,MAAAA,SAAS,EAAElF,KAAK,CAACmF,QAAN,IAAkB,EAXZ;AAYjBC,MAAAA,KAAK,EAAEpF,KAAK,CAACqF,IAAN,IAAc;AAZJ,KAArB;AAcA,SAAK7E,KAAL,GAAa,KAAK8D,aAAlB;AACH;;AAEDhF,EAAAA,iBAAiB,GAAI;AACjB,SAAKgG,mBAAL;AACH;;AACDA,EAAAA,mBAAmB,GAAG;AAClB,SAAKL,UAAL,GAAkB/E,CAAC,CAAC,KAAK6E,YAAL,CAAkBQ,OAAnB,CAAD,CAA6BC,SAA7B,CAAuC;AACrDC,MAAAA,KAAK,EAAE,CAAC,CAAC,CAAD,EAAI,MAAJ,CAAD;AAD8C,KAAvC,CAAlB;AAGH;;AACD1D,EAAAA,YAAY,GAAG;AACX,SAAKkD,UAAL,CAAgBS,KAAhB;AACA,UAAMC,IAAI,GAAG,IAAb;AACAvG,IAAAA,YAAY,CACPwG,eADL,GAEK5E,IAFL,CAEW6E,QAAD,IAAc;AACpBF,MAAAA,IAAI,CAACvF,QAAL,CAAc;AACV8E,QAAAA,SAAS,EAAEW,QAAQ,CAACV;AADV,OAAd,EADoB,CAIpB;AACH,KAPD,EAQCL,IARD,CAQM,IARN;AASH;;AAED,eAAac,eAAb,GAA+B;AAC3B,UAAMlF,QAAQ,GAAG,MAAMvB,YAAY,EAAnC;AACA,UAAM2G,qBAAqB,GAAG,MAAMpF,QAAQ,CACvCE,SAD+B,GAE/BC,UAF+B,CAEpB,UAFoB,EAG/BkF,KAH+B,CAGzB,EAHyB,EAI/BhF,GAJ+B,EAApC;AAKA,UAAMmE,SAAS,GAAGY,qBAAqB,CAACE,IAAtB,CAA2B9D,GAA3B,CAAgCpB,GAAD,oCAC1CA,GAAG,CAACH,IAAJ,EAD0C;AAE7CV,MAAAA,EAAE,EAAEa,GAAG,CAACb;AAFqC,MAA/B,CAAlB;AAIA,UAAMgG,iBAAiB,GAAG,MAAMvF,QAAQ,CACnCE,SAD2B,GAE3BC,UAF2B,CAEhB,MAFgB,EAG3BkF,KAH2B,CAGrB,EAHqB,EAI3BhF,GAJ2B,EAAhC;AAKA,UAAMqE,KAAK,GAAGa,iBAAiB,CAACD,IAAlB,CAAuB9D,GAAvB,CAA4BpB,GAAD,oCAClCA,GAAG,CAACH,IAAJ,EADkC;AAErCV,MAAAA,EAAE,EAAEa,GAAG,CAACb;AAF6B,MAA3B,CAAd;AAKA,UAAMiG,iBAAiB,GAAG,MAAMxF,QAAQ,CACvCE,SAD+B,GAE/BC,UAF+B,CAEpB,MAFoB,EAG/BE,GAH+B,EAAhC;AAIA,UAAM+C,MAAM,GAAGoC,iBAAiB,CAACF,IAAlB,CAAuB9D,GAAvB,CAA4BpB,GAAD,oCACnCA,GAAG,CAACH,IAAJ,EADmC;AAEtCV,MAAAA,EAAE,EAAEa,GAAG,CAACb;AAF8B,MAA3B,CAAf;AAKA,UAAMkG,gBAAgB,GAAG,MAAMzF,QAAQ,CACtCE,SAD8B,GAE9BC,UAF8B,CAEnB,KAFmB,EAG9BE,GAH8B,EAA/B;AAIA,UAAMiB,IAAI,GAAGmE,gBAAgB,CAACH,IAAjB,CAAsB9D,GAAtB,CAA2BpB,GAAD,KAAU;AAC7CH,MAAAA,IAAI,EAAGG,GAAG,CAACH,IAAJ,EADsC;AAE7CV,MAAAA,EAAE,EAAEa,GAAG,CAACb;AAFqC,KAAV,CAA1B,CAAb;AAIA,WAAO;AAAEkF,MAAAA,QAAQ,EAAED,SAAZ;AAAuBG,MAAAA,IAAI,EAAED,KAA7B;AAAoCgB,MAAAA,IAAI,EAAGtC,MAA3C;AAAoD9B,MAAAA,IAAI,EAAGA;AAA3D,KAAP;AACH;;AAyQHqE,EAAAA,MAAM,GAAG,CACV;;AA7WyD","sourcesContent":["import React, { useReducer } from 'react';\r\nimport Link from 'next/link';\r\nimport Head from 'next/head';\r\nimport {loadFirebase} from '../lib/db.js';\r\n\r\nexport default class employerList extends React.Component {\r\n    componentDidMount(){\r\n        const script = document.createElement(\"script\");\r\n        script.src = \"/js/scripts.js\";\r\n        script.async = true;\r\n\r\n        document.body.appendChild(script);\r\n\r\n        const script1 = document.createElement(\"script\");\r\n        script1.src = \"/assets/demo/datatables-demo.js\";\r\n        script1.async = true;\r\n\r\n        document.body.appendChild(script1);\r\n        \r\n    }\r\n    constructor (props){\r\n        super(props);\r\n        this.handleChange = this.handleChange.bind(this);\r\n        this.datatableRef = React.createRef();\r\n        // this.employers = props.employer || []\r\n        this.$datatable = null\r\n        this.initial_state = {\r\n            EMPLOYERID : '',\r\n            C_Name : '',\r\n            C_noEmp: '',\r\n            C_published_date:'',\r\n            C_tel:'',\r\n            C_emailaddr:'',\r\n            C_city:'',\r\n            C_area:'',\r\n            C_Address:'',\r\n            C_Description:'',\r\n            employers: props.employer || [],\r\n            areas: props.area || [],\r\n        };\r\n        this.state = this.initial_state;\r\n    }\r\n\r\n    componentDidMount () {\r\n        this.initializeDatatable()\r\n    }\r\n    initializeDatatable() {\r\n        this.$datatable = $(this.datatableRef.current).DataTable({\r\n            order: [[3, \"desc\"]],\r\n        });\r\n    }\r\n    refreshTable() {\r\n        this.$datatable.clear()\r\n        const self = this;\r\n        employerList\r\n            .getInitialProps()\r\n            .then((response) => {\r\n            self.setState({\r\n                employers: response.employer,\r\n            });\r\n            // self.initializeDatatable()\r\n        })\r\n        .bind(this);\r\n    }\r\n\r\n    static async getInitialProps() {\r\n        const firebase = await loadFirebase() \r\n        const employerQuerySnapshot = await firebase\r\n            .firestore()\r\n            .collection(\"employer\")\r\n            .limit(10)\r\n            .get();\r\n        const employers = employerQuerySnapshot.docs.map((doc) => ({\r\n            ...doc.data(),\r\n            id: doc.id,\r\n        }));\r\n        const areaQuerySnapshot = await firebase\r\n            .firestore()\r\n            .collection(\"area\")\r\n            .limit(10)\r\n            .get();\r\n        const areas = areaQuerySnapshot.docs.map((doc) => ({\r\n            ...doc.data(),\r\n            id: doc.id,\r\n        }));\r\n        \r\n        const cityQuerySnapshot = await firebase\r\n        .firestore()\r\n        .collection(\"city\")\r\n        .get();\r\n        const cities = cityQuerySnapshot.docs.map((doc) => ({\r\n            ...doc.data(),\r\n            id: doc.id,\r\n        }));\r\n\r\n        const jobQuerySnapshot = await firebase\r\n        .firestore()\r\n        .collection(\"job\")\r\n        .get();\r\n        const jobs = jobQuerySnapshot.docs.map((doc) => ({\r\n            data : doc.data(),\r\n            id: doc.id,\r\n        }));\r\n        return { employer: employers, area: areas, city : cities , jobs : jobs };\r\n    }\r\n\r\n    deletePassId = (id)=>{\r\n        $(\"#deleteConfirmModal\").modal('show');\r\n        this.setState({delete_id : id})\r\n        console.log(this.state.delete_id)\r\n    }\r\n\r\n    addPassId = (id) => {\r\n        this.setState({edit_id : id})\r\n        let firebase = loadFirebase()\r\n        let data = {}\r\n        try{\r\n            firebase.firestore().collection('employer').doc(id).get().\r\n            then((snapshot)=>{\r\n                data = snapshot.data()\r\n                console.log(data)\r\n                this.setState ({\r\n                    EMPLOYERID: data.edit_id,\r\n                    C_Name :data.C_Name,\r\n                    C_noEmp:data.C_noEmp,\r\n                    C_published_date:data.C_published_date,\r\n                    C_tel:data.C_tel,\r\n                    C_emailaddr:data.C_emailaddr,\r\n                    C_city:data.C_city,\r\n                    C_area:data.C_area,\r\n                    C_Address:data.C_Address,\r\n                    C_Description:data.C_Description,\r\n                })\r\n            })\r\n            console.log(\"getting data\")\r\n            console.log(this.state.employerName)\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n        console.log(this.state.employerName)\r\n        $(\"#addJobModal\").modal('show')\r\n    }\r\n\r\n    editPassId = (id) => {\r\n        this.setState({edit_id : id})\r\n        let firebase = loadFirebase()\r\n        let data = {}\r\n        try{\r\n            firebase.firestore().collection('employer').doc(id).get()\r\n            .then((snapshot)=>{\r\n                data = snapshot.data()\r\n                console.log(data)\r\n                this.setState ({\r\n                    C_Name :data.C_Name,\r\n                    C_noEmp:data.C_noEmp,\r\n                    C_published_date:data.C_published_date,\r\n                    C_tel:data.C_tel,\r\n                    C_emailaddr:data.C_emailaddr,\r\n                    C_Address:data.C_Address,\r\n                    C_Description:data.C_Description,\r\n                })\r\n            })\r\n            console.log(\"getting data\")\r\n            console.log(this.state.employerName)\r\n            \r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n        console.log(this.state.employerName)\r\n        $(\"#editEmployerModal\").modal('show')\r\n    }\r\n\r\n    updateEmployer = () =>{\r\n        let firebase = loadFirebase()\r\n        try{\r\n            firebase.firestore().collection('employer').doc(this.state.edit_id).update({\r\n                C_Name:this.state.C_Name,\r\n                C_noEmp:this.state.C_noEmp,\r\n                C_published_date:this.state.C_published_date,\r\n                C_tel:this.state.C_tel,\r\n                C_emailaddr:this.state.C_emailaddr,\r\n               C_Address:this.state.C_Address,\r\n                C_Description:this.state.C_Description,\r\n            });\r\n            this.refreshTable();\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n        $(\"#editEmployerModal\").modal('hide')\r\n    }\r\n\r\n    getJobCount = (id) => {\r\n        let jobs = this.props.jobs\r\n        let count = 0\r\n        \r\n             jobs.map(job => {\r\n                 if(job.data.EMPLOYERID == id){\r\n                     console.log(\"same value found\")\r\n                     count ++\r\n                 }\r\n                \r\n             })\r\n             return count;     \r\n    }\r\n\r\n    handleChange = (event) => {\r\n        this.setState({[event.target.name] : event.target.value})\r\n        if(event.target.name == \"AREAID\"){\r\n            this.getCities(event.target.value)\r\n        }\r\n        this.setState({showCities : true})\r\n    }\r\n\r\n    addJob = event => {\r\n        event.preventDefault();\r\n        let firebase = loadFirebase() \r\n        const userRef = firebase.firestore().collection('job')\r\n                .add({\r\n                        EMPLOYERID : this.state.edit_id,\r\n         \r\n                        Jname:this.state.Jname,\r\n                        J_Contract:this.state.J_Contract,\r\n                        J_min_salary:this.state.J_min_salary,\r\n                        J_max_salary:this.state.J_max_salary,\r\n                        J_hours:this.state.J_hours,\r\n                        J_Working_Day:this.state.J_Working_Day,\r\n                        J_JpLevel:this.state.J_JpLevel,\r\n                        J_tel:this.state.J_tel,\r\n                        PostedDate:this.state.PostedDate,\r\n                        J_email:this.state.J_email,\r\n                        J_area:this.state.J_area,\r\n                        J_city:this.state.J_city,\r\n                        J_Address:this.state.J_Address,\r\n                        J_Description:this.state.J_Description,\r\n                        J_Qualification:this.state.J_Qualification                    });\r\n                this.setState({\r\n                    EMPLOYERID : '',\r\n                    Jname:'',\r\n                    J_tel:'',\r\n                    J_min_salary:'',\r\n                    J_max_salary:'',\r\n                    PostedDate:'',\r\n                    J_hours:'',\r\n                    J_email:'',\r\n                    J_city:'',\r\n                    J_area:'',\r\n                    J_Working_Day:'',\r\n                    J_Qualification:'',\r\n                    J_JpLevel:'',\r\n                    J_Description:'',\r\n                    J_Contract:'',\r\n                    J_Address:''                });\r\n                this.addJobCount(this.state.edit_id);\r\n                console.log(userRef);\r\n    }\r\n\r\n    addJobCount = (id) => {\r\n        console.log(\"Job count adding\")\r\n        let data = {}\r\n        try{\r\n            let firebase = loadFirebase()\r\n            firebase.firestore().collection('employer').doc(id).get()\r\n              .then((snapshot)=>{\r\n                  data = snapshot.data();\r\n                  firebase.firestore().collection('employer').doc(id).update({jobCount : data.jobCount+1})  \r\n              })\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n      }\r\n\r\n    getCities = (id) => {\r\n        let cities = []\r\n        try{\r\n            let firebase = loadFirebase()\r\n            firebase.firestore().collection('city').where('AREAID',\"==\",id)\r\n            .get()\r\n            .then((snapshot)=> {\r\n                snapshot.forEach(doc => {\r\n                    cities.push(Object.assign(\r\n                        {id : doc.id},\r\n                        doc.data()\r\n                    ))\r\n                })\r\n                console.log({cities})\r\n                this.setState({cities})\r\n            })\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    selectDisable = (event) => {   \r\n        $(\"#city option:first\").attr(\"disabled\",\"disabled\");\r\n   \r\n        $(\"#area option:first\").attr(\"disabled\",\"disabled\"); \r\n    }\r\n\r\n    addEmployer = event => {\r\n        event.preventDefault();\r\n        let firebase = loadFirebase() \r\n        const userRef = firebase.firestore().collection('employer')\r\n                .add({\r\n                    C_Name:this.state.C_Name,\r\n                    C_noEmp:this.state.C_noEmp,\r\n                    C_published_date:this.state.C_published_date,\r\n                    C_tel:this.state.C_tel,\r\n                    C_emailaddr:this.state.C_emailaddr,\r\n                    C_Address:this.state.C_Address,\r\n                    C_Description:this.state.C_Description,\r\n                    });\r\n                this.setState({\r\n                    C_Name:this.state.C_Name,\r\n                    C_noEmp:this.state.C_noEmp,\r\n                    C_published_date:this.state.C_published_date,\r\n                    C_tel:this.state.C_tel,\r\n                    C_emailaddr:this.state.C_emailaddr,\r\n                    C_Address:this.state.C_Address,\r\n                    C_Description:this.state.C_Description,\r\n                });\r\n        $(\"#addEmployerModal\").modal('hide');      \r\n    }\r\n\r\n    deleteEmployer = () => {\r\n        let firebase = loadFirebase()\r\n        try{\r\n            firebase.firestore().collection('employer')\r\n            .doc(this.state.delete_id)\r\n            .delete()\r\n            console.log(\"Delete successful\");\r\n            this.refreshTable();\r\n        }catch(error){\r\n            console.log(error)\r\n        }\r\n    }\r\n\r\n    clearInput = (event) => {\r\n        this.setState(this.initial_state);\r\n        let inputs, index;\r\n\r\n        inputs = document.getElementsByTagName('input');\r\n        for (index = 0; index < inputs.length; ++index) {\r\n            inputs[index].value = ''\r\n        }\r\n        document.getElementById('Jname').value = '';\r\n        document.getElementById('J_min_salar').value = '';\r\n        document.getElementById('J_max_salary').value = '';\r\n        document.getElementById('J_hours').value = '';\r\n        document.getElementById('J_Working_Dar').value = '';\r\n        document.getElementById('J_tel').value = '';\r\n        document.getElementById('datte').value = '';\r\n        document.getElementById('J_email').value = '';\r\n  \r\n        $(\"#J_Contract option[selected]\").removeAttr(\"selected\");    \r\n        $(\"#J_Contract option:first\").attr(\"selected\",\"selected\");\r\n  \r\n        $(\"#J_JpLevel option[selected]\").removeAttr(\"selected\");    \r\n        $(\"#J_JpLevel option:first\").attr(\"selected\",\"selected\");\r\n  \r\n        $(\"#min_exp_year option[selected]\").removeAttr(\"selected\");    \r\n        $(\"#min_exp_year option:first\").attr(\"selected\",\"selected\");\r\n  \r\n        $(\"#J_city option[selected]\").removeAttr(\"selected\");    \r\n        $(\"#J_city option:first\").attr(\"selected\",\"selected\"); \r\n        \r\n        $(\"#J_area option[selected]\").removeAttr(\"selected\");    \r\n        $(\"#J_area option:first\").attr(\"selected\",\"selected\"); \r\n    }\r\n\r\n  render() {\r\n}}"]},"metadata":{},"sourceType":"module"}